<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lista de Reyes de Ton</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <nav class="container">
        <ul>
            <li><strong>ðŸ‘‘ Mis deseos para Reyes</strong></li>
        </ul>
    </nav>

    <main class="container">
        <header>
            <hgroup>
                <h1>Queridos Reyes Magos...</h1>
                <h2>La web la ha hecho a full Gemini, yo solo meto los regalos. No mirÃ©is en pc que se ve mal.</h2>
            </hgroup>
        </header>

        <section id="lista">
            <div>
                <label for="ordenar">Ordenar por:</label>
                <select id="ordenar">
                    <option value="defecto">Por defecto</option>
                    <option value="asc">Precio: Menor a Mayor</option>
                    <option value="desc">Precio: Mayor a Menor</option>
                </select>
            </div>

            <div id="grid-regalos" class="grid">
                </div>
        </section>
    </main>

    <footer class="container">
        <small>Hecho con ilusiÃ³n para mi familia âœ¨ (y por gemini)</small>
    </footer>

    <script>
        let listaRegalosOriginal = []; // Variable para guardar los datos

        async function cargarRegalos() {
            try {
                const respuesta = await fetch('regalos.json');
                listaRegalosOriginal = await respuesta.json();
                renderizarRegalos(listaRegalosOriginal); // Pintamos la primera vez
            } catch (error) {
                console.error("Error cargando los regalos:", error);
            }
        }

        function renderizarRegalos(regalos) {
            const contenedor = document.getElementById('grid-regalos');
            contenedor.innerHTML = ""; // Limpiamos el grid

            regalos.forEach(regalo => {
                const article = document.createElement('article');
                article.classList.add('regalo-card'); 
                article.innerHTML = `
                    <header>
                        <img src="${regalo.imagen}" alt="${regalo.nombre}">
                        ${regalo.precio ? `<span class="precio-tag">${regalo.precio}â‚¬</span>` : ''}
                    </header>
                    <h3>${regalo.nombre}</h3>
                    <p><small>${regalo.descripcion}</small></p>
                    <a href="${regalo.link}" target="_blank" class="main-link"></a>
                `;
                contenedor.appendChild(article);
            });
        }

        // Escuchamos los cambios en el SELECT
        document.getElementById('ordenar').addEventListener('change', (e) => {
            let regalosOrdenados = [...listaRegalosOriginal]; // Copiamos la lista
            const opcion = e.target.value;

            if (opcion === 'asc' || opcion === 'desc') {
                regalosOrdenados.sort((a, b) => {
                    // Convertimos a nÃºmero (quitando â‚¬ o espacios si los hubiera)
                    const precioA = parseFloat(a.precio) || 0;
                    const precioB = parseFloat(b.precio) || 0;
                    
                    return opcion === 'asc' ? precioA - precioB : precioB - precioA;
                });
            }

            renderizarRegalos(regalosOrdenados);
        });

        cargarRegalos();
    </script>
</body>


</html>
